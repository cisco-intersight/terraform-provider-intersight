// Code generated by go-swagger; DO NOT EDIT.

package models

// This file was generated by the swagger tool.
// Editing this file might prove futile when you re-run the swagger generate command

import (
	"encoding/json"

	"github.com/go-openapi/errors"
	"github.com/go-openapi/strfmt"
	"github.com/go-openapi/swag"
	"github.com/go-openapi/validate"
)

// MemoryPersistentMemoryGoal Persistent Memory Goal
//
// A Persistent Memory Goal that needs to be applied on the associated servers through the policy. This would result in the creation of regions and allocation of volatile memory on the server.
//
// swagger:model memoryPersistentMemoryGoal
type MemoryPersistentMemoryGoal struct {
	MoBaseComplexType

	MemoryPersistentMemoryGoalAO1P1
}

// UnmarshalJSON unmarshals this object from a JSON structure
func (m *MemoryPersistentMemoryGoal) UnmarshalJSON(raw []byte) error {
	// AO0
	var aO0 MoBaseComplexType
	if err := swag.ReadJSON(raw, &aO0); err != nil {
		return err
	}
	m.MoBaseComplexType = aO0

	// AO1
	var aO1 MemoryPersistentMemoryGoalAO1P1
	if err := swag.ReadJSON(raw, &aO1); err != nil {
		return err
	}
	m.MemoryPersistentMemoryGoalAO1P1 = aO1

	return nil
}

// MarshalJSON marshals this object to a JSON structure
func (m MemoryPersistentMemoryGoal) MarshalJSON() ([]byte, error) {
	_parts := make([][]byte, 0, 2)

	aO0, err := swag.WriteJSON(m.MoBaseComplexType)
	if err != nil {
		return nil, err
	}
	_parts = append(_parts, aO0)

	aO1, err := swag.WriteJSON(m.MemoryPersistentMemoryGoalAO1P1)
	if err != nil {
		return nil, err
	}
	_parts = append(_parts, aO1)
	return swag.ConcatJSON(_parts...), nil
}

// Validate validates this memory persistent memory goal
func (m *MemoryPersistentMemoryGoal) Validate(formats strfmt.Registry) error {
	var res []error

	// validation for a type composition with MoBaseComplexType
	if err := m.MoBaseComplexType.Validate(formats); err != nil {
		res = append(res, err)
	}
	// validation for a type composition with MemoryPersistentMemoryGoalAO1P1
	if err := m.MemoryPersistentMemoryGoalAO1P1.Validate(formats); err != nil {
		res = append(res, err)
	}

	if len(res) > 0 {
		return errors.CompositeValidationError(res...)
	}
	return nil
}

// MarshalBinary interface implementation
func (m *MemoryPersistentMemoryGoal) MarshalBinary() ([]byte, error) {
	if m == nil {
		return nil, nil
	}
	return swag.WriteJSON(m)
}

// UnmarshalBinary interface implementation
func (m *MemoryPersistentMemoryGoal) UnmarshalBinary(b []byte) error {
	var res MemoryPersistentMemoryGoal
	if err := swag.ReadJSON(b, &res); err != nil {
		return err
	}
	*m = res
	return nil
}

// MemoryPersistentMemoryGoalAO1P1 memory persistent memory goal a o1 p1
//
// swagger:model MemoryPersistentMemoryGoalAO1P1
type MemoryPersistentMemoryGoalAO1P1 struct {

	// Volatile memory percentage.
	MemoryModePercentage int64 `json:"MemoryModePercentage,omitempty"`

	// Type of the Persistent Memory configuration where the Persistent Memory Modules are combined in an interleaved set or not.
	// Enum: [app-direct app-direct-non-interleaved]
	PersistentMemoryType *string `json:"PersistentMemoryType,omitempty"`

	// CPU Socket ID to which this goal will be applied.
	// Enum: [All Sockets]
	SocketID *string `json:"SocketId,omitempty"`

	// memory persistent memory goal a o1 p1
	MemoryPersistentMemoryGoalAO1P1 map[string]interface{} `json:"-"`
}

// UnmarshalJSON unmarshals this object with additional properties from JSON
func (m *MemoryPersistentMemoryGoalAO1P1) UnmarshalJSON(data []byte) error {
	// stage 1, bind the properties
	var stage1 struct {

		// Volatile memory percentage.
		MemoryModePercentage int64 `json:"MemoryModePercentage,omitempty"`

		// Type of the Persistent Memory configuration where the Persistent Memory Modules are combined in an interleaved set or not.
		// Enum: [app-direct app-direct-non-interleaved]
		PersistentMemoryType *string `json:"PersistentMemoryType,omitempty"`

		// CPU Socket ID to which this goal will be applied.
		// Enum: [All Sockets]
		SocketID *string `json:"SocketId,omitempty"`
	}
	if err := json.Unmarshal(data, &stage1); err != nil {
		return err
	}
	var rcv MemoryPersistentMemoryGoalAO1P1

	rcv.MemoryModePercentage = stage1.MemoryModePercentage
	rcv.PersistentMemoryType = stage1.PersistentMemoryType
	rcv.SocketID = stage1.SocketID
	*m = rcv

	// stage 2, remove properties and add to map
	stage2 := make(map[string]json.RawMessage)
	if err := json.Unmarshal(data, &stage2); err != nil {
		return err
	}

	delete(stage2, "MemoryModePercentage")
	delete(stage2, "PersistentMemoryType")
	delete(stage2, "SocketId")
	// stage 3, add additional properties values
	if len(stage2) > 0 {
		result := make(map[string]interface{})
		for k, v := range stage2 {
			var toadd interface{}
			if err := json.Unmarshal(v, &toadd); err != nil {
				return err
			}
			result[k] = toadd
		}
		m.MemoryPersistentMemoryGoalAO1P1 = result
	}

	return nil
}

// MarshalJSON marshals this object with additional properties into a JSON object
func (m MemoryPersistentMemoryGoalAO1P1) MarshalJSON() ([]byte, error) {
	var stage1 struct {

		// Volatile memory percentage.
		MemoryModePercentage int64 `json:"MemoryModePercentage,omitempty"`

		// Type of the Persistent Memory configuration where the Persistent Memory Modules are combined in an interleaved set or not.
		// Enum: [app-direct app-direct-non-interleaved]
		PersistentMemoryType *string `json:"PersistentMemoryType,omitempty"`

		// CPU Socket ID to which this goal will be applied.
		// Enum: [All Sockets]
		SocketID *string `json:"SocketId,omitempty"`
	}

	stage1.MemoryModePercentage = m.MemoryModePercentage
	stage1.PersistentMemoryType = m.PersistentMemoryType
	stage1.SocketID = m.SocketID

	// make JSON object for known properties
	props, err := json.Marshal(stage1)
	if err != nil {
		return nil, err
	}

	if len(m.MemoryPersistentMemoryGoalAO1P1) == 0 {
		return props, nil
	}

	// make JSON object for the additional properties
	additional, err := json.Marshal(m.MemoryPersistentMemoryGoalAO1P1)
	if err != nil {
		return nil, err
	}

	if len(props) < 3 {
		return additional, nil
	}

	// concatenate the 2 objects
	props[len(props)-1] = ','
	return append(props, additional[1:]...), nil
}

// Validate validates this memory persistent memory goal a o1 p1
func (m *MemoryPersistentMemoryGoalAO1P1) Validate(formats strfmt.Registry) error {
	var res []error

	if err := m.validatePersistentMemoryType(formats); err != nil {
		res = append(res, err)
	}

	if err := m.validateSocketID(formats); err != nil {
		res = append(res, err)
	}

	if len(res) > 0 {
		return errors.CompositeValidationError(res...)
	}
	return nil
}

var memoryPersistentMemoryGoalAO1P1TypePersistentMemoryTypePropEnum []interface{}

func init() {
	var res []string
	if err := json.Unmarshal([]byte(`["app-direct","app-direct-non-interleaved"]`), &res); err != nil {
		panic(err)
	}
	for _, v := range res {
		memoryPersistentMemoryGoalAO1P1TypePersistentMemoryTypePropEnum = append(memoryPersistentMemoryGoalAO1P1TypePersistentMemoryTypePropEnum, v)
	}
}

const (

	// MemoryPersistentMemoryGoalAO1P1PersistentMemoryTypeAppDirect captures enum value "app-direct"
	MemoryPersistentMemoryGoalAO1P1PersistentMemoryTypeAppDirect string = "app-direct"

	// MemoryPersistentMemoryGoalAO1P1PersistentMemoryTypeAppDirectNonInterleaved captures enum value "app-direct-non-interleaved"
	MemoryPersistentMemoryGoalAO1P1PersistentMemoryTypeAppDirectNonInterleaved string = "app-direct-non-interleaved"
)

// prop value enum
func (m *MemoryPersistentMemoryGoalAO1P1) validatePersistentMemoryTypeEnum(path, location string, value string) error {
	if err := validate.Enum(path, location, value, memoryPersistentMemoryGoalAO1P1TypePersistentMemoryTypePropEnum); err != nil {
		return err
	}
	return nil
}

func (m *MemoryPersistentMemoryGoalAO1P1) validatePersistentMemoryType(formats strfmt.Registry) error {

	if swag.IsZero(m.PersistentMemoryType) { // not required
		return nil
	}

	// value enum
	if err := m.validatePersistentMemoryTypeEnum("PersistentMemoryType", "body", *m.PersistentMemoryType); err != nil {
		return err
	}

	return nil
}

var memoryPersistentMemoryGoalAO1P1TypeSocketIDPropEnum []interface{}

func init() {
	var res []string
	if err := json.Unmarshal([]byte(`["All Sockets"]`), &res); err != nil {
		panic(err)
	}
	for _, v := range res {
		memoryPersistentMemoryGoalAO1P1TypeSocketIDPropEnum = append(memoryPersistentMemoryGoalAO1P1TypeSocketIDPropEnum, v)
	}
}

const (

	// MemoryPersistentMemoryGoalAO1P1SocketIDAllSockets captures enum value "All Sockets"
	MemoryPersistentMemoryGoalAO1P1SocketIDAllSockets string = "All Sockets"
)

// prop value enum
func (m *MemoryPersistentMemoryGoalAO1P1) validateSocketIDEnum(path, location string, value string) error {
	if err := validate.Enum(path, location, value, memoryPersistentMemoryGoalAO1P1TypeSocketIDPropEnum); err != nil {
		return err
	}
	return nil
}

func (m *MemoryPersistentMemoryGoalAO1P1) validateSocketID(formats strfmt.Registry) error {

	if swag.IsZero(m.SocketID) { // not required
		return nil
	}

	// value enum
	if err := m.validateSocketIDEnum("SocketId", "body", *m.SocketID); err != nil {
		return err
	}

	return nil
}

// MarshalBinary interface implementation
func (m *MemoryPersistentMemoryGoalAO1P1) MarshalBinary() ([]byte, error) {
	if m == nil {
		return nil, nil
	}
	return swag.WriteJSON(m)
}

// UnmarshalBinary interface implementation
func (m *MemoryPersistentMemoryGoalAO1P1) UnmarshalBinary(b []byte) error {
	var res MemoryPersistentMemoryGoalAO1P1
	if err := swag.ReadJSON(b, &res); err != nil {
		return err
	}
	*m = res
	return nil
}
